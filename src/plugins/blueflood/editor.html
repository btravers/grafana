<script type="text/javascript" src="plugins/blueflood/angularjs-dropdown-multiselect.js"></script>

<div class="editor-row" style="margin-top: 10px;">

	<div ng-repeat="target in panel.targets"
		style="margin-bottom: 10px;"
		class="grafana-target"
		ng-class="{'grafana-target-hidden': target.hide}"
		ng-controller="BluefloodCtrl"
		ng-init="init()">

		<div class="grafana-target-inner-wrapper">
			<div class="grafana-target-inner">
				<ul class="grafana-target-controls">
					<li class="dropdown">
						<a class="pointer dropdown-toggle"
							data-toggle="dropdown"
							tabindex="1">
							<i class="icon-cog"></i>
						</a>
						<ul class="dropdown-menu pull-right" role="menu">
							<li role="menuitem">
								<a tabindex="1"
									ng-click="duplicate()">
									Duplicate
								</a>
							</li>
						</ul>
					</li>
					<li>
						<a class="pointer" tabindex="1" ng-click="removeDataQuery(target)">
							<i class="icon-remove"></i>
						</a>
					</li>
				</ul>
				
				<ul class="grafana-segment-list">
					<li>
						<a class="grafana-target-segment"
							ng-click="target.hide = !target.hide; targetBlur();"
							role="menuitem">
							<i class="icon-eye-open"></i>
						</a>
					</li>
				</ul>

				<ul class="grafana-segment-list" role="menu">

					<!-- Tenant -->

					<li>
						<input type="text"
							class="input-medium grafana-target-segment-input"
							spellcheck="false"
							ng-model="target.tenant"
							placeholder="Select tenant"
							bs-typeahead="suggestTenants"
							ng-blur="targetBlur()"/>
						<a class="grafana-target-segment" bs-tooltip="'Update the list of tenant names'" ng-click="updateTenantList();">
							<i ng-hide="tenantListLoading" class="icon-refresh"></i>
							<i ng-show="tenantListLoading" class="icon-spinner icon-spin"></i>
						</a>
					</li>


					<!-- Metric -->

					<li>
						<input type="text"
							class="input-medium grafana-target-segment-input"
							spellcheck="false"
							ng-model="target.metric"
							placeholder="Select metric"
							bs-typeahead="suggestMetrics"
							ng-blur="targetBlur()"/>
						<a class="grafana-target-segment" bs-tooltip="'Update the list of metric names'" ng-click="updateMetricList();">
							<i ng-hide="metricListLoading" class="icon-refresh"></i>
							<i ng-show="metricListLoading" class="icon-spinner icon-spin"></i>
						</a>
					</li>

					
					<!-- Aggregation -->
					<li>
						<div ng-dropdown-multiselect="" 
							class="input-small grafana-target-segment-input"
							options="aggregators" 
							selected-model="target.aggregators" 
							extra-settings="aggregatorsettings"
							translation-texts="aggregatortext"
							ng-blur="targetBlur()">
						</div>
					</li>

				</ul>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</div>